(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const Y="workout-power:settings";function X(){try{const e=localStorage.getItem(Y);if(!e)return null;const t=JSON.parse(e);return!t||typeof t!="object"?null:t}catch{return null}}function ee(){try{if(globalThis?.matchMedia?.("(prefers-color-scheme: dark)")?.matches)return"dark"}catch{}return"light"}let w={screen:"home",theme:ee(),soundEnabled:!0,voice:"auto",selectedWorkoutId:"classic",workout:null,phase:"idle",currentExercise:null,remainingSeconds:0};const I=new Set;function E(){return w}function v(e){w={...w,...e},I.forEach(t=>t(w))}function y(e){return I.add(e),()=>I.delete(e)}function te(){const e=X();e&&(w={...w,...e,theme:e.theme??w.theme})}function K({header:e,main:t}){const n=document.createElement("div");n.className="h-screen overflow-hidden flex flex-col bg-base-100 text-base-content";const s=document.createElement("header");s.className="navbar bg-base-200 px-4 sticky top-0 z-10",s.append(e);const o=document.createElement("main");return o.className="flex-1 overflow-y-auto px-4 py-4",o.append(t),n.append(s,o),n}let P=null,T=!1,G=null,R=null,g=0,N="work",k=0;function ne(e,t,n,s){q(),G=e,R={onTick:t,onExerciseChange:n,onFinish:s},g=0,N="work",T=!1,k=z(e,g),D(),$(),P=setInterval(()=>{T||(k=Math.max(0,k-1),$(),k===0&&ie())},1e3)}function oe(){T=!0}function se(){T=!1}function q(){P&&(clearInterval(P),P=null),T=!1,G=null,R=null,g=0,N="work",k=0}function ie(){const e=G,t=R;if(!e||!t)return;const n=e.exercises??[];if(n.length===0){q(),t.onFinish?.();return}const s=g>=n.length-1;if(N==="work"){if(!s){N="rest",k=Math.max(0,e.defaultRestSeconds??0),D(),$();return}q(),t.onFinish?.();return}g=Math.min(g+1,n.length-1),N="work",k=z(e,g),D(),$()}function z(e,t){const s=(e.exercises??[])[t],o=e.defaultWorkSeconds??0;return Math.max(0,s?.durationSeconds??o)}function $(){R?.onTick?.(k)}function D(){const e=G,t=R;if(!e||!t)return;const n=e.exercises??[],s=n[g]??null,o=n[g+1]??null;t.onExerciseChange?.({phase:N,exercise:s,nextExercise:o})}function ce(e){v({workout:e,phase:"running",screen:"workout"}),ne(e,ue,de,me)}function ae(){oe(),v({phase:"paused"})}function re(){se(),v({phase:"running"})}function le(){q(),v({phase:"idle",screen:"home",workout:null})}function ue(e){v({remainingSeconds:e})}function de(e){v({currentExercise:e})}function me(){v({phase:"finished"})}const pe="classic",ve="Classic Scientific 7-Minute Workout",fe="The original high-intensity circuit: 12 exercises, bodyweight only.",ge=30,he=10,xe=[{id:"jumping-jacks",name:"Jumping Jacks",voiceCueStart:"Jumping jacks. Go!",voiceCueMid:"Keep moving!",voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Wall sit",svgFile:"jumping-jacks.svg",formTips:"Full arm and leg extension. Land softly."},{id:"wall-sit",name:"Wall Sit",voiceCueStart:"Wall sit. Slide down until thighs parallel to floor.",voiceCueMid:"Hold strong",voiceCueCountdown:null,voiceCueNext:"Rest. Next: Push-ups",svgFile:"wall-sit.svg",formTips:"Back flat against wall. Knees over ankles."},{id:"push-ups",name:"Push-Ups",voiceCueStart:"Push-ups. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Abdominal crunches",svgFile:"push-ups.svg",formTips:"Body straight. Lower chest close to floor."},{id:"abdominal-crunches",name:"Abdominal Crunches",voiceCueStart:"Abdominal crunches. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Step-ups onto chair",svgFile:"abdominal-crunches.svg",formTips:"Hands behind head or across chest. Lift shoulders."},{id:"step-ups",name:"Step-Ups onto Chair",voiceCueStart:"Step-ups onto chair. Alternate legs.",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Squats",svgFile:"step-ups.svg",formTips:"Drive through heel. Keep chair stable."},{id:"squats",name:"Squats",voiceCueStart:"Squats. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Triceps dips on chair",svgFile:"squats.svg",formTips:"Knees over toes. Chest up."},{id:"triceps-dips",name:"Triceps Dips on Chair",voiceCueStart:"Triceps dips on chair. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Plank",svgFile:"triceps-dips.svg",formTips:"Elbows back. Lower until arms at 90 degrees."},{id:"plank",name:"Plank",voiceCueStart:"Plank. Hold position.",voiceCueMid:"Stay strong",voiceCueCountdown:null,voiceCueNext:"Rest. Next: High knees",svgFile:"plank.svg",formTips:"Straight line from head to heels. Core tight."},{id:"high-knees",name:"High Knees / Running in Place",voiceCueStart:"High knees. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Lunges",svgFile:"high-knees.svg",formTips:"Drive knees up. Quick feet."},{id:"lunges",name:"Lunges",voiceCueStart:"Lunges. Alternate legs.",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Push-up with rotation",svgFile:"lunges.svg",formTips:"Front knee over ankle. Back knee toward floor."},{id:"push-up-rotation",name:"Push-Up with Rotation",voiceCueStart:"Push-up with rotation. Alternate sides.",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Side plank",svgFile:"push-up-rotation.svg",formTips:"Rotate fully. Keep core engaged."},{id:"side-plank",name:"Side Plank",durationSeconds:30,voiceCueStart:"Side plank. Hold, alternate sides if needed.",voiceCueMid:null,voiceCueCountdown:null,voiceCueNext:"Workout complete! Great job.",svgFile:"side-plank.svg",formTips:"Stack feet. Body straight. Hold both sides if time allows."}],Ce={id:pe,name:ve,description:fe,defaultWorkSeconds:ge,defaultRestSeconds:he,exercises:xe},Se="advanced",ke="Advanced 7-Minute Workout",be="More challenging version with rotations and unilateral moves.",we=30,Ne=10,Ee=[{id:"reverse-lunge-elbow-instep",name:"Reverse Lunge, Elbow to Instep (Alternate)",voiceCueStart:"Reverse lunge, elbow to instep. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Side plank left",svgFile:"reverse-lunge-elbow.svg",formTips:"Deep lunge. Twist torso."},{id:"side-plank-left",name:"Side Plank (Left)",voiceCueStart:"Side plank left. Hold.",voiceCueMid:null,voiceCueCountdown:null,voiceCueNext:"Rest. Next: Side plank right",svgFile:"side-plank.svg",formTips:"Stack feet. Lift hips."},{id:"side-plank-right",name:"Side Plank (Right)",voiceCueStart:"Side plank right. Hold.",voiceCueMid:null,voiceCueCountdown:null,voiceCueNext:"Rest. Next: Push-ups",svgFile:"side-plank.svg",formTips:"Keep body straight."},{id:"push-ups-advanced",name:"Push-Ups",voiceCueStart:"Push-ups. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Single-leg deadlift",svgFile:"push-ups.svg",formTips:"Add clap or diamond if advanced."},{id:"single-leg-deadlift",name:"Single-Leg Deadlift to Reach (Alternate)",voiceCueStart:"Single-leg deadlift to reach. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Squat to overhead reach",svgFile:"single-leg-deadlift.svg",formTips:"Hinge at hips. Balance."},{id:"squat-overhead",name:"Squat to Overhead Reach",voiceCueStart:"Squat to overhead reach. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Burpees",svgFile:"squat-overhead.svg",formTips:"Deep squat. Reach high."},{id:"burpees",name:"Burpees",voiceCueStart:"Burpees. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Mountain climbers",svgFile:"burpees.svg",formTips:"Full extension. Jump high."},{id:"mountain-climbers",name:"Mountain Climbers",voiceCueStart:"Mountain climbers. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Lunge with rotation",svgFile:"mountain-climbers.svg",formTips:"Fast knees. Core tight."},{id:"lunge-rotation",name:"Lunge with Rotation (Alternate)",voiceCueStart:"Lunge with rotation. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Plank with lift",svgFile:"lunge-rotation.svg",formTips:"Twist over front leg."},{id:"plank-lift",name:"Plank with Arm/Leg Lift (Alternate)",voiceCueStart:"Plank with lift. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Single-leg squat",svgFile:"plank-lift.svg",formTips:"Lift opposite arm/leg. Hold balance."},{id:"single-leg-squat",name:"Single-Leg Squat (Alternate)",voiceCueStart:"Single-leg squat. Alternate legs.",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next: Triceps dip with leg extension",svgFile:"single-leg-squat.svg",formTips:"Use chair for support if needed."},{id:"triceps-dip-leg",name:"Triceps Dip with Leg Extension (Alternate)",voiceCueStart:"Triceps dip with leg extension. Go!",voiceCueMid:null,voiceCueCountdown:null,voiceCueNext:"Workout complete! Amazing effort.",svgFile:"triceps-dip-leg.svg",formTips:"Extend one leg. Lower deeply."}],Te={id:Se,name:ke,description:be,defaultWorkSeconds:we,defaultRestSeconds:Ne,exercises:Ee},ye="quick-test",Re="Quick Test Circuit",Me="Short 3-exercise circuit for testing the app flow.",Le=30,Fe=10,We=[{id:"jumping-jacks",name:"Jumping Jacks",durationSeconds:30,voiceCueStart:"Jumping jacks. Go!",voiceCueMid:"Keep those arms and legs moving!",voiceCueCountdown:"Ten seconds left",voiceCueNext:"Rest. Next up: Wall sit",svgFrames:["jumping_jacks_closed.svg","jumping_jacks_open.svg"],animationSpeedMs:800,formTips:"Land softly on the balls of your feet. Full arm and leg extension."},{id:"wall-sit",name:"Wall Sit",durationSeconds:30,voiceCueStart:"Wall sit. Slide down until thighs are parallel to the floor.",voiceCueMid:"Hold strong!",voiceCueCountdown:null,voiceCueNext:"Rest. Next up: Push-ups",svgFrames:["wall_sit.svg"],animationSpeedMs:null,formTips:"Back flat against the wall. Knees directly over ankles."},{id:"push-ups",name:"Push-Ups",durationSeconds:30,voiceCueStart:"Push-ups. Go!",voiceCueMid:null,voiceCueCountdown:"Ten seconds left",voiceCueNext:"Workout complete! Great job.",svgFrames:["push_up_down.svg","push_up_up.svg"],animationSpeedMs:1e3,formTips:"Keep body straight. Lower chest close to the floor."}],Pe={id:ye,name:Re,description:Me,defaultWorkSeconds:Le,defaultRestSeconds:Fe,exercises:We},A=[Ce,Te,Pe];function Ae(e){return A.find(t=>t.id===e)??null}function qe(e){if(e.querySelector('[data-screen="home-container"]'))return()=>{};const t=E(),n=document.createElement("div");n.className="relative flex items-center w-full";const s=document.createElement("div");s.className="absolute left-1/2 -translate-x-1/2 text-4xl font-sans font-semibold whitespace-nowrap",s.textContent="Workout Power";const o=document.createElement("button");o.className="btn btn-ghost btn-square ml-auto",o.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" fill="none"
         viewBox="0 0 24 24" stroke-width="1.5"
         stroke="currentColor" class="size-6">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593
           c.55 0 1.02.398 1.11.94l.213 1.281
           c.063.374.313.686.645.87.074.04.147.083.22.127
           .325.196.72.257 1.075.124l1.217-.456
           a1.125 1.125 0 0 1 1.37.49l1.296 2.247
           a1.125 1.125 0 0 1-.26 1.431l-1.003.827
           c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255
           c-.008.378.137.75.43.991l1.004.827
           c.424.35.534.955.26 1.43l-1.298 2.247
           a1.125 1.125 0 0 1-1.369.491l-1.217-.456
           c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128
           c-.331.183-.581.495-.644.869l-.213 1.281
           c-.09.543-.56.94-1.11.94h-2.594
           c-.55 0-1.019-.398-1.11-.94l-.213-1.281
           c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127
           c-.325-.196-.72-.257-1.076-.124l-1.217.456
           a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247
           a1.125 1.125 0 0 1 .26-1.431l1.004-.827
           c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255
           c.007-.38-.138-.751-.43-.992l-1.004-.827
           a1.125 1.125 0 0 1-.26-1.43l1.297-2.247
           a1.125 1.125 0 0 1 1.37-.491l1.216.456
           c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128
           .332-.183.582-.495.644-.869l.214-1.28Z" />
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
    </svg>
  `,o.addEventListener("click",()=>{v({screen:"settings"})}),n.append(s,o);const i=document.createElement("div");i.className="flex flex-col gap-6";const l=document.createElement("button");l.className="btn btn-primary btn-block btn-lg text-2xl active:scale-100 transition-none",l.textContent="Start workout",l.addEventListener("click",()=>{const c=Ae(E().selectedWorkoutId)??A[0];c&&ce(c)});const m=document.createElement("div");m.className="flex flex-col gap-3";const u=new Map;A.forEach(c=>{const d=c.id===t.selectedWorkoutId,a=document.createElement("button");a.type="button",a.className="w-full text-left rounded-box bg-base-200 border border-base-300 overflow-hidden hover:bg-base-300 hover:border-primary/40 active:bg-base-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40",d&&a.classList.add("border-primary","bg-base-300"),a.addEventListener("click",()=>{v({selectedWorkoutId:c.id})}),u.set(c.id,a);const r=document.createElement("div");r.className="px-5 py-4 flex flex-col gap-1";const x=document.createElement("h2");x.className="font-semibold leading-tight truncate",x.textContent=c.name;const S=document.createElement("p");S.className="text-sm opacity-80 truncate",S.textContent=c.description??"";const C=document.createElement("p");C.className="text-xs opacity-70";const b=$e(c);C.textContent=`${c.exercises?.length??0} exercises • ${Ge(b)} (includes rest)`,r.append(x,S,C),a.append(r),m.append(a)}),i.append(l,m);const p=document.createElement("div");return p.setAttribute("data-screen","home-container"),p.append(K({header:n,main:i})),e.append(p),y(c=>{for(const d of A){const a=u.get(d.id);if(!a)continue;const r=d.id===c.selectedWorkoutId;a.classList.toggle("border-primary",r),a.classList.toggle("bg-base-300",r)}})}function $e(e){const t=e.exercises??[],n=t.length,s=e.defaultWorkSeconds??0,o=e.defaultRestSeconds??0,i=t.reduce((m,u)=>m+(u.durationSeconds??s),0),l=n>1?o*(n-1):0;return i+l}function Ge(e=0){const t=Math.floor(e/60),n=e%60;return`${t}m ${n}s`}function He(e){if(e.querySelector('[data-screen="workout-container"]'))return()=>{};const t=E(),{currentExercise:n,remainingSeconds:s,phase:o}=t,i=n?.phase,l=n?.exercise,m=n?.nextExercise,u=document.createElement("div");u.className="flex items-center w-full";const p=document.createElement("div");p.className="flex-1 text-center font-semibold",p.setAttribute("data-el","title"),p.textContent=i==="rest"?"Rest":"Workout",u.append(p);const h=document.createElement("div");h.className="flex flex-col items-center justify-center gap-6 text-center";const c=document.createElement("div");c.className="text-xl font-medium",c.setAttribute("data-el","name"),i==="rest"?c.textContent="Take a breather":c.textContent=l?.name??"Get Ready";const d=document.createElement("div");d.className="text-6xl font-bold tabular-nums inline-block",d.style.minWidth="5ch",d.setAttribute("data-el","timer"),d.textContent=O(s);const a=document.createElement("div");a.className="text-sm opacity-70",a.setAttribute("data-el","nextRest");const r=document.createElement("div");r.className="text-sm opacity-70",r.setAttribute("data-el","nextExercise");const x=t.workout?.defaultRestSeconds??0,S=i==="work"&&!!m,C=!!m;a.textContent=S?`Next rest: ${x}s`:"",r.textContent=C?i==="rest"?`Up next: ${m.name}`:`Next exercise: ${m.name}`:"";const b=document.createElement("div");b.className="text-sm opacity-70",b.setAttribute("data-el","hint"),b.textContent=o==="paused"?"Paused — tap anywhere to continue":"Tap anywhere to pause";const M=document.createElement("button");M.className="btn btn-ghost btn-sm mt-2 active:scale-100 transition-none",M.textContent="End workout",M.addEventListener("click",f=>{f.stopPropagation(),le()}),h.append(c,d,a,r,b,M);const H=document.createElement("div");H.setAttribute("data-screen","workout-container");const _=K({header:u,main:h});return H.append(_),e.append(H),_.querySelector("main")?.addEventListener("click",()=>{const{phase:f}=E();f==="running"?ae():f==="paused"&&re()}),y(f=>{const L=f.currentExercise?.phase,F=f.currentExercise?.nextExercise,Q=f.workout?.defaultRestSeconds??0,V=L==="work"&&!!F,Z=!!F;p.textContent=L==="rest"?"Rest":"Workout",c.textContent=L==="rest"?"Take a breather":f.currentExercise?.exercise?.name??"Get Ready",d.textContent=O(f.remainingSeconds),a.textContent=V?`Next rest: ${Q}s`:"",r.textContent=Z?L==="rest"?`Up next: ${F.name}`:`Next exercise: ${F.name}`:"",b.textContent=f.phase==="paused"?"Paused — tap anywhere to continue":"Tap anywhere to pause"})}function O(e=0){const t=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return`${t}:${n}`}function Be(e){if(e.querySelector('[data-screen="settings-container"]'))return()=>{};const t=document.createElement("div");t.className="flex items-center w-full gap-2";const n=document.createElement("button");n.className="btn btn-ghost btn-sm",n.textContent="Back",n.addEventListener("click",()=>v({screen:"home"}));const s=document.createElement("div");s.className="flex-1 text-center font-semibold",s.textContent="Settings";const o=document.createElement("div");o.className="w-[56px]",t.append(n,s,o);const i=document.createElement("div");i.className="flex flex-col gap-4";const l=document.createElement("label");l.className="form-control w-full";const m=document.createElement("div");m.className="label",m.innerHTML='<span class="label-text">Theme</span>';const u=document.createElement("select");u.className="select select-bordered w-full",u.innerHTML=`
    <option value="light">Light</option>
    <option value="dark">Dark</option>
  `;const p=document.createElement("label");p.className="form-control";const h=document.createElement("div");h.className="label cursor-pointer",h.innerHTML='<span class="label-text">Sound</span>';const c=document.createElement("input");c.type="checkbox",c.className="toggle toggle-primary",h.append(c),p.append(h);const d=document.createElement("label");d.className="form-control w-full";const a=document.createElement("div");a.className="label",a.innerHTML='<span class="label-text">Voice</span>';const r=document.createElement("select");r.className="select select-bordered w-full",r.innerHTML=`
    <option value="auto">Auto</option>
    <option value="default">Default</option>
  `,l.append(m,u),d.append(a,r),i.append(l,p,d);const x=document.createElement("div");x.setAttribute("data-screen","settings-container"),x.append(K({header:t,main:i})),e.append(x);const S=C=>{u.value=C.theme??"light",c.checked=!!C.soundEnabled,r.value=C.voice??"auto"};return S(E()),u.addEventListener("change",()=>{v({theme:u.value})}),c.addEventListener("change",()=>{v({soundEnabled:c.checked})}),r.addEventListener("change",()=>{v({voice:r.value})}),y(S)}const W=document.getElementById("app");function je(){let e=null,t=null;const n=s=>{if(s.screen!==e){if(typeof t=="function"){try{t()}catch{}t=null}W.innerHTML="",s.screen==="home"&&(t=qe(W)),s.screen==="workout"&&(t=He(W)),s.screen==="settings"&&(t=Be(W)),e=s.screen}};y(n),n(E())}let U=null,B=null;function Ie(){y(e=>{if(!e.soundEnabled||!e.currentExercise)return;const{exercise:t,phase:n}=e.currentExercise,s=e.remainingSeconds;n!==U&&(B=null,n==="work"&&j(t.voiceCueStart),n==="rest"&&j(t.voiceCueNext),U=n),n==="work"&&s===10&&t.voiceCueCountdown&&B!==t.id&&(j(t.voiceCueCountdown),B=t.id)})}function j(e){if(!e)return;const t=new SpeechSynthesisUtterance(e);speechSynthesis.cancel(),speechSynthesis.speak(t)}function J(){te(),je(),Ie()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",J,{once:!0}):J();
